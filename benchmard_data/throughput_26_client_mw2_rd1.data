Buildfile: /home/ec2-user/ASL-MQ/build.xml

compile:

jar:
      [jar] Building jar: /home/ec2-user/ASL-MQ/ASL-MQ.jar

run:
     [java] Message server running
     [java] ########## Middleware Report ##########
     [java] Req#	 Time	 Resp	 Rate	 Recv#	 Throughput
     [java] 十一月 04, 2014 12:27:53 上午 main.java.ch.ethz.systems.asl.service.db.DBService getConnection
     [java] 資訊: Get connection error:0 ms.
     [java] 十一月 04, 2014 12:27:53 上午 main.java.ch.ethz.systems.asl.service.db.DBService getConnection
     [java] 資訊: Retry Count: 0
     [java] Exception in thread "pool-1-thread-2" java.lang.NullPointerException
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.getConnection(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.getConnection(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.util.DbUtil.getConnection(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.msgExecution(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.runMsgManagement(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.run(Unknown Source)
     [java] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
     [java] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
     [java] 	at java.lang.Thread.run(Thread.java:745)
     [java] 1000	 56161	 56	 17	 988	 100
     [java] 2000	 108549	 54	 18	 1987	 133
     [java] 3000	 161652	 53	 18	 2991	 157
     [java] 4000	 218600	 54	 18	 3989	 166
     [java] 5000	 273361	 54	 18	 4987	 178
     [java] 6000	 331113	 55	 18	 5988	 181
     [java] 7000	 386448	 55	 18	 6988	 189
     [java] 8000	 444993	 55	 18	 7987	 190
     [java] 9000	 503186	 55	 17	 8987	 191
     [java] 10000	 565531	 56	 17	 9990	 192
     [java] 11000	 617668	 56	 17	 10987	 196
     [java] 12000	 671596	 55	 17	 11989	 200
     [java] 13000	 726792	 55	 17	 12988	 200
     [java] 14000	 782249	 55	 17	 13987	 202
     [java] 15000	 839841	 55	 17	 14987	 202
     [java] 16000	 897565	 56	 17	 15987	 202
     [java] 17000	 956914	 56	 17	 16987	 202
     [java] 18000	 1016275	 56	 17	 17989	 204
     [java] 19000	 1081536	 56	 17	 18988	 202
     [java] 20000	 1146422	 57	 17	 19987	 202
     [java] 21000	 1216134	 57	 17	 20988	 201
     [java] 22000	 1290937	 58	 17	 21987	 200
     [java] 23000	 1364131	 59	 16	 22988	 198
     [java] 24000	 1440175	 60	 16	 23987	 196
     [java] 25000	 1516894	 60	 16	 24987	 193
     [java] 26000	 1591540	 61	 16	 25990	 192
     [java] 27000	 1675608	 62	 16	 26987	 191
     [java] 28000	 1756442	 62	 15	 27987	 189
     [java] 29000	 1838509	 63	 15	 28990	 188
     [java] 30000	 1921672	 64	 15	 29987	 186
     [java] 31000	 2014848	 64	 15	 30988	 184
     [java] 32000	 2114984	 66	 15	 31988	 181
     [java] 33000	 2212553	 67	 14	 32989	 179
     [java] 34000	 2317846	 68	 14	 33988	 177
     [java] 35000	 2415536	 69	 14	 34987	 175
     [java] 36000	 2523955	 70	 14	 35987	 172
     [java] 37000	 2634443	 71	 14	 36987	 170
     [java] 38000	 2744444	 72	 13	 37988	 168
     [java] 39000	 2867903	 73	 13	 38989	 165
     [java] 40000	 2994981	 74	 13	 39988	 162
     [java] 41000	 3120124	 76	 13	 40987	 160
     [java] 42000	 3246809	 77	 12	 41988	 157
     [java] 43000	 3373539	 78	 12	 42987	 155
     [java] 44000	 3506101	 79	 12	 43987	 153
     [java] 45000	 3651625	 81	 12	 44987	 151
     [java] 46000	 3791935	 82	 12	 45988	 148
     [java] 47000	 3931407	 83	 11	 46988	 147
     [java] 48000	 4079067	 84	 11	 47987	 145
     [java] 49000	 4228703	 86	 11	 48987	 142
     [java] 50000	 4380385	 87	 11	 49987	 140
     [java] 51000	 4557268	 89	 11	 50988	 138
     [java] 52000	 4697888	 90	 11	 51987	 136
     [java] 53000	 4870471	 91	 10	 52988	 134
     [java] 54000	 5039325	 93	 10	 53987	 133
     [java] 55000	 5200545	 94	 10	 54987	 131
     [java] 56000	 5375021	 95	 10	 55988	 129
     [java] 57000	 5551010	 97	 10	 56987	 127
     [java] 58000	 5723857	 98	 10	 57987	 126
     [java] 59000	 5910054	 100	 9	 58988	 124
     [java] 60000	 6092488	 101	 9	 59988	 122
     [java] 61000	 6288629	 103	 9	 60987	 121
     [java] 62000	 6476250	 104	 9	 61987	 119
     [java] 63000	 6666552	 105	 9	 62988	 117
     [java] 64000	 6877831	 107	 9	 63988	 116
     [java] 65000	 7085345	 109	 9	 64988	 114
     [java] 66000	 7274002	 110	 9	 65987	 113
     [java] 67000	 7507037	 112	 8	 66987	 111
     [java] 68000	 7726715	 113	 8	 67987	 110
     [java] 69000	 7918152	 114	 8	 68987	 109
     [java] 70000	 8156990	 116	 8	 69987	 107
     [java] 71000	 8397779	 118	 8	 70988	 106
     [java] 72000	 8612776	 119	 8	 71987	 104
     [java] 73000	 8842782	 121	 8	 72987	 103
     [java] 74000	 9082741	 122	 8	 73987	 102
     [java] 75000	 9315363	 124	 8	 74987	 101
     [java] 76000	 9553351	 125	 7	 75987	 100
     [java] 77000	 9791771	 127	 7	 76987	 98
     [java] 78000	 10035161	 128	 7	 77987	 97
     [java] 79000	 10283302	 130	 7	 78987	 96
     [java] 80000	 10533515	 131	 7	 79987	 95
     [java] 81000	 10768965	 132	 7	 80987	 94
     [java] 82000	 10998647	 134	 7	 81987	 94
     [java] 83000	 11244318	 135	 7	 82987	 93
     [java] 84000	 11549404	 137	 7	 83987	 91
     [java] 85000	 11914179	 140	 7	 84987	 90
     [java] 86000	 12238370	 142	 7	 85987	 88
     [java] 87000	 12599289	 144	 6	 86987	 87
     [java] 88000	 12979528	 147	 6	 87987	 85
     [java] 89000	 13354778	 150	 6	 88987	 84
     [java] 90000	 13733658	 152	 6	 89987	 83
     [java] 91000	 14119859	 155	 6	 90987	 81
     [java] 92000	 14478774	 157	 6	 91987	 80
     [java] 93000	 14866455	 159	 6	 92988	 79
     [java] 94000	 15274654	 162	 6	 93987	 78
     [java] 95000	 15690256	 165	 6	 94987	 76
     [java] 96000	 16093334	 167	 5	 95987	 75
     [java] 97000	 16453355	 169	 5	 96987	 74
     [java] 98000	 16855024	 171	 5	 97987	 73
     [java] 99000	 17285153	 174	 5	 98987	 72
     [java] 100000	 17721972	 177	 5	 99987	 71
     [java] 101000	 18168104	 179	 5	 100987	 70
     [java] 102000	 18621508	 182	 5	 101987	 69
     [java] 103000	 19024182	 184	 5	 102987	 68
     [java] 104000	 19410688	 186	 5	 103988	 68
     [java] 105000	 19884790	 189	 5	 104987	 67
     [java] 106000	 20354994	 192	 5	 105987	 66
     [java] 107000	 20824631	 194	 5	 106987	 65
     [java] 108000	 21291201	 197	 5	 107987	 64
     [java] 109000	 21678743	 198	 5	 108987	 64
     [java] 110000	 22149067	 201	 4	 109987	 63
     [java] 111000	 22642144	 203	 4	 110987	 62
     [java] 112000	 23138004	 206	 4	 111987	 61
     [java] 113000	 23657117	 209	 4	 112987	 60
     [java] 114000	 24156576	 211	 4	 113987	 60
     [java] 115000	 24650171	 214	 4	 114987	 59
     [java] 116000	 25087776	 216	 4	 115987	 59
     [java] 117000	 25620953	 218	 4	 116987	 58
     [java] 118000	 26147020	 221	 4	 117987	 57
     [java] 119000	 26668952	 224	 4	 118987	 57
     [java] 120000	 27219209	 226	 4	 119987	 56
     [java] 121000	 27766682	 229	 4	 120987	 55
     [java] 122000	 28264437	 231	 4	 121987	 55
     [java] 123000	 28814055	 234	 4	 122987	 54
     [java] 124000	 29328229	 236	 4	 123987	 54
     [java] 125000	 29897197	 239	 4	 124987	 53
     [java] 126000	 30484339	 241	 4	 125987	 52
     [java] 127000	 31066055	 244	 4	 126987	 52
     [java] 128000	 31626667	 247	 4	 127987	 51
     [java] 129000	 32159937	 249	 4	 128987	 51
     [java] java.sql.SQLException: sql:SELECT func_delete_msg_byid('e8e9da88-2b7d-4a4f-939c-ad535abda2bb')
     [java] ERROR: deadlock detected
     [java]   詳細：Process 5368 waits for ShareLock on transaction 2340331; blocked by process 5359.
     [java] Process 5359 waits for ShareLock on transaction 2340326; blocked by process 5358.
     [java] Process 5358 waits for AccessExclusiveLock on tuple (2087,80) of relation 16403 of database 16385; blocked by process 5368.
     [java]   建議：See server log for query details.
     [java]   在位置：SQL function "func_delete_msg_byid" statement 1
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.select(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.util.DbUtil.sqlSelect(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.processReceive(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.msgExecution(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.runMsgManagement(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.run(Unknown Source)
     [java] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
     [java] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
     [java] 	at java.lang.Thread.run(Thread.java:745)
     [java] java.sql.SQLException: sql:SELECT func_delete_msg_byid('e8e9da88-2b7d-4a4f-939c-ad535abda2bb')
     [java] ERROR: deadlock detected
     [java]   詳細：Process 5370 waits for AccessExclusiveLock on tuple (2087,80) of relation 16403 of database 16385; blocked by process 5367.
     [java] Process 5367 waits for ShareLock on transaction 2340328; blocked by process 5371.
     [java] Process 5371 waits for ShareLock on transaction 2340326; blocked by process 5358.
     [java] Process 5358 waits for AccessExclusiveLock on tuple (2087,80) of relation 16403 of database 16385; blocked by process 5370.
     [java]   建議：See server log for query details.
     [java]   在位置：SQL function "func_delete_msg_byid" statement 1
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.select(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.util.DbUtil.sqlSelect(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.processReceive(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.msgExecution(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.runMsgManagement(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.run(Unknown Source)
     [java] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
     [java] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
     [java] 	at java.lang.Thread.run(Thread.java:745)
     [java] java.sql.SQLException: sql:SELECT func_delete_msg_byid('e8e9da88-2b7d-4a4f-939c-ad535abda2bb')
     [java] ERROR: deadlock detected
     [java]   詳細：Process 5376 waits for AccessExclusiveLock on tuple (2087,80) of relation 16403 of database 16385; blocked by process 5367.
     [java] Process 5367 waits for ShareLock on transaction 2340328; blocked by process 5371.
     [java] Process 5371 waits for ShareLock on transaction 2340326; blocked by process 5358.
     [java] Process 5358 waits for AccessExclusiveLock on tuple (2087,80) of relation 16403 of database 16385; blocked by process 5376.
     [java]   建議：See server log for query details.
     [java]   在位置：SQL function "func_delete_msg_byid" statement 1
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.select(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.util.DbUtil.sqlSelect(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.processReceive(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.msgExecution(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.runMsgManagement(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.run(Unknown Source)
     [java] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
     [java] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
     [java] 	at java.lang.Thread.run(Thread.java:745)
     [java] java.sql.SQLException: sql:SELECT func_delete_msg_detail_byid('886d9d52-e64e-4711-acba-caa4d0e150f5')
     [java] ERROR: deadlock detected
     [java]   詳細：Process 5370 waits for ShareLock on transaction 2340439; blocked by process 5359.
     [java] Process 5359 waits for ShareLock on transaction 2340441; blocked by process 5370.
     [java]   建議：See server log for query details.
     [java]   在位置：SQL function "func_delete_msg_detail_byid" statement 1
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.select(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.util.DbUtil.sqlSelect(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.processReceive(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.msgExecution(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.runMsgManagement(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.run(Unknown Source)
     [java] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
     [java] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
     [java] 	at java.lang.Thread.run(Thread.java:745)
     [java] java.sql.SQLException: sql:update queue set qsize = ((select qsize from queue where qname = 'queue12') + 1) where qname = 'queue12' 
     [java] ERROR: deadlock detected
     [java]   詳細：Process 5376 waits for ShareLock on transaction 2340473; blocked by process 5359.
     [java] Process 5359 waits for ShareLock on transaction 2340516; blocked by process 5366.
     [java] Process 5366 waits for ExclusiveLock on tuple (14,45) of relation 16388 of database 16385; blocked by process 5376.
     [java]   建議：See server log for query details.
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.sqlAction(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.util.DbUtil.sqlAction(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.updateQueueSize(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.processSend(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.msgExecution(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.runMsgManagement(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.run(Unknown Source)
     [java] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
     [java] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
     [java] 	at java.lang.Thread.run(Thread.java:745)
     [java] java.sql.SQLException: sql:update queue set qsize = ((select qsize from queue where qname = 'queue12') + 1) where qname = 'queue12' 
     [java] ERROR: deadlock detected
     [java]   詳細：Process 5372 waits for ExclusiveLock on tuple (14,45) of relation 16388 of database 16385; blocked by process 5360.
     [java] Process 5360 waits for ShareLock on transaction 2340473; blocked by process 5359.
     [java] Process 5359 waits for ShareLock on transaction 2340516; blocked by process 5366.
     [java] Process 5366 waits for ExclusiveLock on tuple (14,45) of relation 16388 of database 16385; blocked by process 5372.
     [java]   建議：See server log for query details.
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.sqlAction(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.util.DbUtil.sqlAction(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.updateQueueSize(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.processSend(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.msgExecution(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.runMsgManagement(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.run(Unknown Source)
     [java] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
     [java] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
     [java] 	at java.lang.Thread.run(Thread.java:745)
     [java] java.sql.SQLException: sql:update queue set qsize = ((select qsize from queue where qname = 'queue12') + 1) where qname = 'queue12' 
     [java] ERROR: deadlock detected
     [java]   詳細：Process 5369 waits for ExclusiveLock on tuple (14,45) of relation 16388 of database 16385; blocked by process 5360.
     [java] Process 5360 waits for ShareLock on transaction 2340473; blocked by process 5359.
     [java] Process 5359 waits for ShareLock on transaction 2340516; blocked by process 5366.
     [java] Process 5366 waits for ExclusiveLock on tuple (14,45) of relation 16388 of database 16385; blocked by process 5369.
     [java]   建議：See server log for query details.
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.sqlAction(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.util.DbUtil.sqlAction(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.updateQueueSize(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.processSend(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.msgExecution(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.runMsgManagement(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.run(Unknown Source)
     [java] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
     [java] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
     [java] 	at java.lang.Thread.run(Thread.java:745)
     [java] java.sql.SQLException: sql:update queue set qsize = ((select qsize from queue where qname = 'queue12') + -1) where qname = 'queue12' 
     [java] ERROR: deadlock detected
     [java]   詳細：Process 5368 waits for ShareLock on transaction 2340526; blocked by process 5367.
     [java] Process 5367 waits for ShareLock on transaction 2340515; blocked by process 5368.
     [java]   建議：See server log for query details.
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.sqlAction(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.util.DbUtil.sqlAction(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.updateQueueSize(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.processReceive(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.msgExecution(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.runMsgManagement(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.run(Unknown Source)
     [java] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
     [java] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
     [java] 	at java.lang.Thread.run(Thread.java:745)
     [java] 130000	 32904791	 253	 3	 129987	 50

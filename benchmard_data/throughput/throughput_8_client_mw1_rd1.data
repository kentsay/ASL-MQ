Buildfile: /home/ec2-user/ASL-MQ/build.xml

compile:

jar:

run:
     [java] Message server running
     [java] ########## Middleware Report ##########
     [java] Req#	 Time	 Resp	 Tput	 Recv#
     [java] Nov 03, 2014 3:29:59 PM main.java.ch.ethz.systems.asl.service.db.DBService getConnection
     [java] INFO: Get connection error:0 ms.
     [java] Nov 03, 2014 3:29:59 PM main.java.ch.ethz.systems.asl.service.db.DBService getConnection
     [java] INFO: Retry Count: 0
     [java] Exception in thread "pool-1-thread-2" java.lang.NullPointerException
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.getConnection(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.getConnection(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.util.DbUtil.getConnection(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.msgExecution(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.runMsgManagement(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.run(Unknown Source)
     [java] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
     [java] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
     [java] 	at java.lang.Thread.run(Thread.java:745)
     [java] Nov 03, 2014 3:29:59 PM main.java.ch.ethz.systems.asl.service.db.DBService getConnection
     [java] INFO: DBCP borrow connection time: 89 ms.
     [java] Nov 03, 2014 3:29:59 PM main.java.ch.ethz.systems.asl.service.db.DBService getConnection
     [java] INFO: DBCP borrow connection time: 101 ms.
     [java] java.sql.SQLException: sql:SELECT func_insert_queue('queue11')
     [java] ERROR: duplicate key value violates unique constraint "queue_qname_key"
     [java]   Detail: Key (qname)=(queue11) already exists.
     [java]   Where: SQL function "func_insert_queue" statement 1
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.select(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.util.DbUtil.sqlSelect(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.processSend(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.msgExecution(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.runMsgManagement(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.run(Unknown Source)
     [java] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
     [java] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
     [java] 	at java.lang.Thread.run(Thread.java:745)
     [java] java.sql.SQLException: sql:SELECT func_insert_queue('queue11')
     [java] ERROR: duplicate key value violates unique constraint "queue_qname_key"
     [java]   Detail: Key (qname)=(queue11) already exists.
     [java]   Where: SQL function "func_insert_queue" statement 1
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.select(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.util.DbUtil.sqlSelect(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.processSend(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.msgExecution(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.runMsgManagement(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.run(Unknown Source)
     [java] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
     [java] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
     [java] 	at java.lang.Thread.run(Thread.java:745)
     [java] java.sql.SQLException: sql:SELECT func_insert_queue('queue17')
     [java] ERROR: duplicate key value violates unique constraint "queue_qname_key"
     [java]   Detail: Key (qname)=(queue17) already exists.
     [java]   Where: SQL function "func_insert_queue" statement 1
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.select(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.util.DbUtil.sqlSelect(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.processSend(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.msgExecution(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.runMsgManagement(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.run(Unknown Source)
     [java] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
     [java] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
     [java] 	at java.lang.Thread.run(Thread.java:745)
     [java] 1000	 50016	 50	 20	 996
     [java] 2000	 99040	 49	 20	 1997
     [java] 3000	 147703	 49	 20	 2996
     [java] 4000	 195878	 48	 20	 3997
     [java] 5000	 244095	 48	 20	 4996
     [java] 6000	 292530	 48	 20	 5996
     [java] 7000	 341371	 48	 20	 6997
     [java] 8000	 389952	 48	 20	 7996
     [java] 9000	 440130	 48	 20	 8996
     [java] 10000	 489228	 48	 20	 9996
     [java] 11000	 538219	 48	 20	 10996
     [java] 12000	 587826	 48	 20	 11996
     [java] 13000	 637406	 49	 20	 12996
     [java] 14000	 686977	 49	 20	 13996
     [java] 15000	 737041	 49	 20	 14996
     [java] 16000	 787614	 49	 20	 15996
     [java] 17000	 838263	 49	 20	 16996
     [java] 18000	 888444	 49	 20	 17996
     [java] 19000	 938875	 49	 20	 18997
     [java] 20000	 989348	 49	 20	 19996
     [java] 21000	 1040087	 49	 20	 20996
     [java] 22000	 1091507	 49	 20	 21996
     [java] 23000	 1142650	 49	 20	 22996
     [java] 24000	 1194293	 49	 20	 23997
     [java] 25000	 1245776	 49	 20	 24996
     [java] 26000	 1298734	 49	 20	 25996
     [java] 27000	 1351095	 50	 19	 26996
     [java] 28000	 1403390	 50	 19	 27996
     [java] 29000	 1456007	 50	 19	 28996
     [java] 30000	 1509895	 50	 19	 29997
     [java] 31000	 1562745	 50	 19	 30996
     [java] 32000	 1616325	 50	 19	 31996
     [java] 33000	 1670232	 50	 19	 32996
     [java] 34000	 1724214	 50	 19	 33996
     [java] 35000	 1779913	 50	 19	 34996
     [java] 36000	 1835309	 50	 19	 35996
     [java] 37000	 1890538	 51	 19	 36996
     [java] 38000	 1945146	 51	 19	 37996
     [java] 39000	 2001502	 51	 19	 38996
     [java] 40000	 2058771	 51	 19	 39997
     [java] 41000	 2115971	 51	 19	 40997
     [java] 42000	 2173182	 51	 19	 41996
     [java] 43000	 2230746	 51	 19	 42996
     [java] 44000	 2288573	 52	 19	 43996
     [java] 45000	 2349602	 52	 19	 44996
     [java] 46000	 2411367	 52	 19	 45996
     [java] 47000	 2470798	 52	 19	 46996
     [java] 48000	 2529924	 52	 18	 47996
     [java] 49000	 2592202	 52	 18	 48996
     [java] 50000	 2654732	 53	 18	 49996
     [java] 51000	 2720652	 53	 18	 50996
     [java] 52000	 2786824	 53	 18	 51996
     [java] 53000	 2851159	 53	 18	 52996
     [java] 54000	 2917975	 54	 18	 53996
     [java] 55000	 2982487	 54	 18	 54996
     [java] 56000	 3049862	 54	 18	 55996
     [java] 57000	 3118164	 54	 18	 56996
     [java] 58000	 3184397	 54	 18	 57996
     [java] 59000	 3252248	 55	 18	 58996
     [java] java.sql.SQLException: sql:update queue set qsize = ((select qsize from queue where qname = 'queue11') + -1) where qname = 'queue11' 
     [java] ERROR: deadlock detected
     [java]   Detail: Process 8006 waits for ShareLock on transaction 478716; blocked by process 7994.
     [java] Process 7994 waits for ShareLock on transaction 478714; blocked by process 8006.
     [java]   Hint: See server log for query details.
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.sqlAction(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.util.DbUtil.sqlAction(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.updateQueueSize(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.processReceive(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.msgExecution(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.runMsgManagement(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.run(Unknown Source)
     [java] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
     [java] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
     [java] 	at java.lang.Thread.run(Thread.java:745)
     [java] java.sql.SQLException: sql:SELECT func_delete_msg_detail_byid('5e313afb-9926-44ce-bab0-07424a7ad673')
     [java] ERROR: deadlock detected
     [java]   Detail: Process 7993 waits for ShareLock on transaction 478716; blocked by process 7994.
     [java] Process 7994 waits for AccessExclusiveLock on tuple (774,59) of relation 16403 of database 16385; blocked by process 8002.
     [java] Process 8002 waits for ShareLock on transaction 478718; blocked by process 7993.
     [java]   Hint: See server log for query details.
     [java]   Where: SQL function "func_delete_msg_detail_byid" statement 1
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.select(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.util.DbUtil.sqlSelect(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.processReceive(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.msgExecution(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.runMsgManagement(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.run(Unknown Source)
     [java] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
     [java] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
     [java] 	at java.lang.Thread.run(Thread.java:745)
     [java] java.sql.SQLException: sql:SELECT func_delete_msg('queue11')
     [java] ERROR: deadlock detected
     [java]   Detail: Process 7994 waits for ShareLock on transaction 478740; blocked by process 8002.
     [java] Process 8002 waits for ShareLock on transaction 478716; blocked by process 7994.
     [java]   Hint: See server log for query details.
     [java]   Where: SQL function "func_delete_msg" statement 1
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.select(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.util.DbUtil.sqlSelect(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.processSend(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.msgExecution(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.runMsgManagement(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.run(Unknown Source)
     [java] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
     [java] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
     [java] 	at java.lang.Thread.run(Thread.java:745)
     [java] java.sql.SQLException: sql:update queue set qsize = ((select qsize from queue where qname = 'queue14') + 1) where qname = 'queue14' 
     [java] ERROR: deadlock detected
     [java]   Detail: Process 7992 waits for ShareLock on transaction 478799; blocked by process 8006.
     [java] Process 8006 waits for ShareLock on transaction 478805; blocked by process 8001.
     [java] Process 8001 waits for ExclusiveLock on tuple (1,45) of relation 16388 of database 16385; blocked by process 7992.
     [java]   Hint: See server log for query details.
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.sqlAction(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.util.DbUtil.sqlAction(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.updateQueueSize(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.processSend(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.msgExecution(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.runMsgManagement(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.run(Unknown Source)
     [java] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
     [java] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
     [java] 	at java.lang.Thread.run(Thread.java:745)
     [java] java.sql.SQLException: sql:update queue set qsize = ((select qsize from queue where qname = 'queue14') + 1) where qname = 'queue14' 
     [java] ERROR: deadlock detected
     [java]   Detail: Process 7994 waits for ExclusiveLock on tuple (1,45) of relation 16388 of database 16385; blocked by process 7993.
     [java] Process 7993 waits for ShareLock on transaction 478799; blocked by process 8006.
     [java] Process 8006 waits for ShareLock on transaction 478805; blocked by process 8001.
     [java] Process 8001 waits for ExclusiveLock on tuple (1,45) of relation 16388 of database 16385; blocked by process 7994.
     [java]   Hint: See server log for query details.
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.sqlAction(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.util.DbUtil.sqlAction(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.updateQueueSize(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.processSend(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.msgExecution(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.runMsgManagement(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.run(Unknown Source)
     [java] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
     [java] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
     [java] 	at java.lang.Thread.run(Thread.java:745)
     [java] java.sql.SQLException: sql:update queue set qsize = ((select qsize from queue where qname = 'queue15') + 1) where qname = 'queue15' 
     [java] ERROR: deadlock detected
     [java]   Detail: Process 7992 waits for ExclusiveLock on tuple (0,6) of relation 16388 of database 16385; blocked by process 7993.
     [java] Process 7993 waits for ShareLock on transaction 478878; blocked by process 8006.
     [java] Process 8006 waits for ShareLock on transaction 478875; blocked by process 8003.
     [java] Process 8003 waits for ExclusiveLock on tuple (0,6) of relation 16388 of database 16385; blocked by process 7992.
     [java]   Hint: See server log for query details.
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.sqlAction(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.util.DbUtil.sqlAction(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.updateQueueSize(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.processSend(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.msgExecution(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.runMsgManagement(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.run(Unknown Source)
     [java] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
     [java] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
     [java] 	at java.lang.Thread.run(Thread.java:745)
     [java] java.sql.SQLException: sql:SELECT func_delete_msg_detail_byid('af3cd305-6881-4f35-a238-5517a6c64bfb')
     [java] ERROR: deadlock detected
     [java]   Detail: Process 7994 waits for ShareLock on transaction 478878; blocked by process 8006.
     [java] Process 8006 waits for ShareLock on transaction 478905; blocked by process 7994.
     [java]   Hint: See server log for query details.
     [java]   Where: SQL function "func_delete_msg_detail_byid" statement 1
     [java] 	at main.java.ch.ethz.systems.asl.service.db.DBService.select(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.util.DbUtil.sqlSelect(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.processReceive(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.msgExecution(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.runMsgManagement(Unknown Source)
     [java] 	at main.java.ch.ethz.systems.asl.service.middleware.MessageService.run(Unknown Source)
     [java] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
     [java] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
     [java] 	at java.lang.Thread.run(Thread.java:745)
     [java] 60000	 3344533	 55	 17	 59997
